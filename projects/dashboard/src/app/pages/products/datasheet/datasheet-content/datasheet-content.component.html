<div fxLayout="row">
  <mat-card fxFlex="100%">
    <mat-card-title fxLayout>
      <span>Add Datasheet</span>
    </mat-card-title>
    <mat-divider></mat-divider>
    <mat-card-content fxLayout="column">
      <form #form="ngForm">
        <mat-card fxFlex="100%">
          <mat-card-content fxLayout="column">
            <mat-form-field>
              <mat-select required placeholder="Product" name="product" [(ngModel)]="datasheet.productId">
                <mat-option>
                  <ngx-mat-select-search placeholderLabel="Filter product" noEntriesFoundLabel="No result" name="filterProductKeyword"
                    #filterProductKeyword="ngModel" ngModel></ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let option of filteredProductOptions" [value]="option.value">
                  {{option.optionText}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-select required placeholder="Datasheet Type" name="type" [(ngModel)]="datasheet.type">
                <mat-option *ngFor="let type of types" [value]="type.value"> {{type.optionText}} </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field>
              <mat-select required placeholder="Datasheet Language" name="lang" [(ngModel)]="datasheet.lang">
                <mat-option *ngFor="let language of languages" [value]="language.value">{{language.optionText}}</mat-option>
              </mat-select>
            </mat-form-field>

            <button type="button" mat-button (click)="fileInput.click()" [disabled]="isLoading" *ngIf="pageIsEditable">Upload
              a file.</button>
            <input hidden type="file" #fileInput (change)="uploadFile($event)" [disabled]="isLoading">

            <mat-form-field fxFlex>
              <input matInput placeholder="Version" name="version" [(ngModel)]="datasheet.version" [readOnly]="!pageIsEditable"
                required>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input matInput placeholder="Download Link" name="filePath" [(ngModel)]="datasheet.filePath" [readOnly]="!pageIsEditable"
                required>
            </mat-form-field>
          </mat-card-content>
        </mat-card>
      </form>
      <vvtk-loader *ngIf="isLoading"></vvtk-loader>
    </mat-card-content>
    <mat-card-content fxLayout="column">
      <div fxLayout="row" fxLayoutAlign="end center">
        <button mat-button [routerLink]="['/products/datasheet']">Cancel</button>
        <span fxFlex></span>
        <button mat-button color="primary" (click)="save()" [disabled]="!form.valid || isLoading" *ngIf="pageIsEditable">Save</button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
