<div fxLayout="row">
  <mat-card fxFlex="100%">
    <mat-card-title fxLayout>
      <span>{{(id==0)?'Add':'Edit'}} Job Opportunities</span>
      <span fxFlex></span>
      <vvtk-language-selector *ngIf="id>0"></vvtk-language-selector>
    </mat-card-title>
    <mat-divider></mat-divider>

    <mat-card-content fxLayout="column">
      <form #form="ngForm" fxLayout="column">
        <mat-card fxFlex="100%">
          <mat-card-content fxLayout="column">
            <mat-form-field fxFlex>
              <input matInput maxlength="255" placeholder="Title" name="title" [(ngModel)]="data.title" [readOnly]="!pageIsEditable" required>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input matInput maxlength="255" placeholder="Category" name="category" [(ngModel)]="data.category" [readOnly]="!pageIsEditable"
                required>
            </mat-form-field>
            <mat-form-field fxFlex *ngIf="!pageIsEditable">
              <input matInput placeholder="Country (Applied to All)" name="countryName" [value]="getCountryName(data.country.id)" readOnly>
            </mat-form-field>
            <vvtk-input-container fxLayout="column" *ngIf="pageIsEditable">
              <div fxLayout="column" vvtkhtml>
                <mat-form-field>
                  <mat-select name="country" placeholder="Country (Applied to All)" [(ngModel)]="data.country.id" (selectionChange)="getStates()" required>
                    <mat-option *ngFor="let country of countries" [value]="country.id">{{country.name}}</mat-option>
                  </mat-select>
                </mat-form-field>
                <input type="text" class="hidden-input" [value]="data.country.id" required />
              </div>
            </vvtk-input-container>
            <mat-form-field fxFlex *ngIf="states.length>0 && !pageIsEditable">
              <input matInput placeholder="State (Applied to All)" name="stateName" [value]="getStateName(data.states.id)" readOnly>
            </mat-form-field>
            <vvtk-input-container fxLayout="column" *ngIf="states.length>0 && pageIsEditable">
              <div fxLayout="column" vvtkhtml>
                <mat-form-field>
                  <mat-select name="state" placeholder="State (Applied to All)" [(ngModel)]="data.states.id" required>
                    <mat-option *ngFor="let state of states" [value]="state.id">{{state.name}}</mat-option>
                  </mat-select>
                </mat-form-field>
                <input type="text" class="hidden-input" [value]="data.states.id" required />
              </div>
            </vvtk-input-container>
            <mat-form-field fxFlex>
              <input matInput maxlength="255" placeholder="Location" name="location" [(ngModel)]="data.location" [readOnly]="!pageIsEditable"
                required>
            </mat-form-field>
            <mat-form-field fxFlex>
              <textarea matInput placeholder="Description" name="description" [(ngModel)]="data.description" rows="5" [readOnly]="!pageIsEditable"
                required></textarea>
            </mat-form-field>
            <mat-form-field fxFlex>
              <textarea matInput placeholder="Responsibilities" name="responsibilities" [(ngModel)]="data.responsibilities" rows="5" [readOnly]="!pageIsEditable"
                required></textarea>
            </mat-form-field>
            <mat-form-field fxFlex>
              <textarea matInput placeholder="Requirements" name="requirements" [(ngModel)]="data.requirements" rows="5" [readOnly]="!pageIsEditable"
                required></textarea>
            </mat-form-field>
          </mat-card-content>
        </mat-card>
      </form>
    </mat-card-content>
    <mat-card-content fxLayout="column">
      <div fxLayout="row" fxLayoutAlign="end center">
        <button mat-button [routerLink]="['/careers/vacancies/list']">Cancel</button>
        <span fxFlex></span>
        <button mat-button color="primary" (click)="save()" [disabled]="!form.valid || isLoading" *ngIf="pageIsEditable">Save</button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
