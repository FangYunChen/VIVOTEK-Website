<mat-card>
  <mat-card-title>
    <span>Compatibility - Support Feature List</span>
  </mat-card-title>
  <mat-divider></mat-divider>
  <mat-card-content>
    <mat-card>
      <mat-card-content>
        <div fxLayout="column">
          <div fxLayout="row wrap" fxLayoutGap="30px">
            <mat-form-field>
              <mat-select required placeholder="Support Product" name="selectedSupportProduct" [(ngModel)]="selectedSupportProduct"
                (selectionChange)="selectedSupportProductChange()">
                <mat-option *ngFor="let supportProduct of supportProducts" [value]="supportProduct.value">
                  {{supportProduct.optionText}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-select required placeholder="Support Category" name="selectedSupportCategory" [(ngModel)]="selectedSupportCategory"
                (selectionChange)="selectedSupportCategoryChange()">
                <mat-option *ngFor="let supportCategory of supportCategories" [value]="supportCategory.value">
                  {{supportCategory.optionText}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div fxLayout="column" *ngIf="selectedSupportProduct && selectedSupportCategory && supportFeatures">
            <button type="button" mat-button (click)="addFeature(0)" *ngIf="pageIsEditable">Add Feature</button>
            <mat-list [sortablejs]="supportFeatures" [sortablejsOptions]="groupOptions">
              <mat-list-item class="small-list-item" *ngFor="let item of supportFeatures; let i = index">
                <mat-icon class="drag-handle" *ngIf="pageIsEditable">drag_handle</mat-icon>
                <button mat-mini-fab class="action-btn" color="warn" matTooltip="Add" matTooltipPosition="above"
                  (click)="addFeature(i+1)" *ngIf="pageIsEditable">
                  <mat-icon>add</mat-icon>
                </button>
                <button mat-mini-fab class="action-btn" color="accent" matTooltip="Delete" matTooltipPosition="above"
                  (click)="deleteFeature(i)" *ngIf="pageIsEditable">
                  <mat-icon>delete</mat-icon>
                </button>
                <mat-slide-toggle color="primary" [(ngModel)]="item.isEnabled" [matTooltip]="item.isEnabled?'Enable':'Disable'"
                  matTooltipPosition="above" [disabled]="!pageIsEditable">
                </mat-slide-toggle>
                <mat-form-field fxFlex>
                  <input matInput placeholder="feature" [name]="'feature'+i" [(ngModel)]="item.name" [readOnly]="!pageIsEditable"
                    required>
                </mat-form-field>
              </mat-list-item>
            </mat-list>
          </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="end center" *ngIf="pageIsEditable && selectedSupportProduct && selectedSupportCategory">
          <button mat-button color="primary" (click)="save()" [disabled]="isLoading">Save</button>
        </div>

      </mat-card-content>
    </mat-card>
  </mat-card-content>
  <vvtk-loader *ngIf="isLoading"></vvtk-loader>
</mat-card>
