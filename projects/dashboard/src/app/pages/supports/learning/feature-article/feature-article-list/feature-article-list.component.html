<div fxLayout="row">
  <mat-card fxFlex="100%">
    <mat-card-title fxLayout>
      <span>Feature Article</span>
      <button mat-mini-fab class="action-btn" color="warn" matTooltip="Add" matTooltipPosition="above" [routerLink]="['./',0]"
        *ngIf="pageContentIsEditable">
        <mat-icon>add</mat-icon>
      </button>
      <span fxFlex></span>
      <vvtk-language-selector></vvtk-language-selector>
    </mat-card-title>
    <div fxLayout="column" fxLayoutAlign="start stretch">
      <mat-card-title>
        <h4>Banner for PC</h4>
        <a mat-mini-fab class="action-btn" color="primary" [matTooltip]="banner.PC.hideContent?'展開':'收合'"
          matTooltipPosition="above" (click)="banner.PC.hideContent = !banner.PC.hideContent">
          <mat-icon *ngIf="banner.PC.hideContent">keyboard_arrow_down</mat-icon>
          <mat-icon *ngIf="!banner.PC.hideContent">keyboard_arrow_up</mat-icon>
        </a>
      </mat-card-title>
      <mat-card-content fxLayout="column" fxLayoutAlign="start stretch" [hidden]="banner.PC.hideContent">
        <div fxLayout="row" fxLayoutAlign="center" *ngIf="banner.PC.imageUrl">
          <div class="text-center">
            <img [src]="banner.PC.imageUrl | safeUrl" [alt]="banner.PC.imageAlt" [title]="banner.PC.imageName">
          </div>
        </div>
        <button type="button" mat-button (click)="imgPCInput.click()" [disabled]="isLoading" *ngIf="!readOnly">Upload a
          image (Recommended size: 1920*570)</button>
        <input hidden type="file" #imgPCInput accept="image/*" (change)="uploadFile($event,'PC')" [disabled]="isLoading" />
        <mat-form-field fxFlex>
          <input matInput placeholder="Image url" [name]="'templateImageSrc'" [(ngModel)]="banner.PC.imageUrl"
            [readOnly]="readOnly">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input matInput maxlength="255" placeholder="Image title" [name]="'templateImageTitle'" [(ngModel)]="banner.PC.imageName"
            [readOnly]="readOnly">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input matInput placeholder="Image alt" [name]="'templateImageAlt'" [(ngModel)]="banner.PC.imageAlt"
            [readOnly]="readOnly">
        </mat-form-field>
        <button mat-button color="primary" (click)="saveBanner('PC')" *ngIf="pageIsEditable" fxFlex>Save</button>
      </mat-card-content>

      <mat-card-title>
        <h4>Banner for Tablet</h4>
        <a mat-mini-fab class="action-btn" color="primary" [matTooltip]="banner.Tablet.hideContent?'展開':'收合'"
          matTooltipPosition="above" (click)="banner.Tablet.hideContent = !banner.Tablet.hideContent">
          <mat-icon *ngIf="banner.Tablet.hideContent">keyboard_arrow_down</mat-icon>
          <mat-icon *ngIf="!banner.Tablet.hideContent">keyboard_arrow_up</mat-icon>
        </a>
      </mat-card-title>
      <mat-card-content fxLayout="column" fxLayoutAlign="start stretch" [hidden]="banner.Tablet.hideContent">
        <div fxLayout="row" fxLayoutAlign="center" *ngIf="banner.Tablet.imageUrl">
          <div class="text-center">
            <img [src]="banner.Tablet.imageUrl | safeUrl" [alt]="banner.Tablet.imageAlt" [title]="banner.Tablet.imageName">
          </div>
        </div>
        <button type="button" mat-button (click)="imgTabletInput.click()" [disabled]="isLoading" *ngIf="!readOnly">Upload
          a image (Recommended size: 1024*300)</button>
        <input hidden type="file" #imgTabletInput accept="image/*" (change)="uploadFile($event,'Tablet')" [disabled]="isLoading" />
        <mat-form-field fxFlex>
          <input matInput placeholder="Image url" [name]="'templateImageSrc'" [(ngModel)]="banner.Tablet.imageUrl"
            [readOnly]="readOnly">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input matInput maxlength="255" placeholder="Image title" [name]="'templateImageTitle'" [(ngModel)]="banner.Tablet.imageName"
            [readOnly]="readOnly">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input matInput placeholder="Image alt" [name]="'templateImageAlt'" [(ngModel)]="banner.Tablet.imageAlt"
            [readOnly]="readOnly">
        </mat-form-field>
        <button mat-button color="primary" (click)="saveBanner('Tablet')" *ngIf="pageIsEditable" fxFlex>Save</button>
      </mat-card-content>

      <mat-card-title>
        <h4>Banner for Mobile</h4>
        <a mat-mini-fab class="action-btn" color="primary" [matTooltip]="banner.Mobile.hideContent?'展開':'收合'"
          matTooltipPosition="above" (click)="banner.Mobile.hideContent = !banner.Mobile.hideContent">
          <mat-icon *ngIf="banner.Mobile.hideContent">keyboard_arrow_down</mat-icon>
          <mat-icon *ngIf="!banner.Mobile.hideContent">keyboard_arrow_up</mat-icon>
        </a>
      </mat-card-title>
      <mat-card-content fxLayout="column" fxLayoutAlign="start stretch" [hidden]="banner.Mobile.hideContent">
        <div fxLayout="row" fxLayoutAlign="center" *ngIf="banner.Mobile.imageUrl">
          <div class="text-center">
            <img [src]="banner.Mobile.imageUrl | safeUrl" [alt]="banner.Mobile.imageAlt" [title]="banner.Mobile.imageName">
          </div>
        </div>
        <button type="button" mat-button (click)="imgMobileInput.click()" [disabled]="isLoading" *ngIf="!readOnly">Upload
          a image (Recommended size: 640*280)</button>
        <input hidden type="file" #imgMobileInput accept="image/*" (change)="uploadFile($event,'Mobile')" [disabled]="isLoading" />
        <mat-form-field fxFlex>
          <input matInput placeholder="Image url" [name]="'templateImageSrc'" [(ngModel)]="banner.Mobile.imageUrl"
            [readOnly]="readOnly">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input matInput maxlength="255" placeholder="Image title" [name]="'templateImageTitle'" [(ngModel)]="banner.Mobile.imageName"
            [readOnly]="readOnly">
        </mat-form-field>
        <mat-form-field fxFlex>
          <input matInput placeholder="Image alt" [name]="'templateImageAlt'" [(ngModel)]="banner.Mobile.imageAlt"
            [readOnly]="readOnly">
        </mat-form-field>
        <button mat-button color="primary" (click)="saveBanner('Mobile')" *ngIf="pageIsEditable" fxFlex>Save</button>
        <div>&nbsp;</div>
      </mat-card-content>
    </div>
    <mat-divider></mat-divider>
    <mat-card-content fxLayout="column">
      <mat-card fxFlex="100%">
        <mat-card-content fxLayout="column">
          <div fxLayout="column" fxFlex="100%" class="tableBoxOuter">
            <div fxLayout="column" class="tableBoxInner" style="min-width:950px;">
              <mat-form-field>
                <input matInput #filter placeholder="Filter">
              </mat-form-field>
              <mat-table matSort #table [dataSource]="dataSource" class="table table-hover table-striped table-bordered table-condensed">
                <ng-container cdkColumnDef="id">
                  <mat-header-cell *cdkHeaderCellDef mat-sort-header fxFlex="50px" fxLayoutAlign="center center"> ID
                  </mat-header-cell>
                  <mat-cell *cdkCellDef="let row" fxFlex="50px" fxLayoutAlign="center center"> {{row.id}} </mat-cell>
                </ng-container>

                <ng-container cdkColumnDef="linkText">
                  <mat-header-cell *cdkHeaderCellDef mat-sort-header> Title </mat-header-cell>
                  <mat-cell *cdkCellDef="let row"> {{row.linkText}} </mat-cell>
                </ng-container>
                <ng-container cdkColumnDef="updatedUser">
                  <mat-header-cell *cdkHeaderCellDef mat-sort-header fxFlex="150px" fxLayoutAlign="center center">
                    Updated User </mat-header-cell>
                  <mat-cell *cdkCellDef="let row" fxFlex="150px" fxLayoutAlign="center center">
                    <span [matTooltip]="row.updatedUser.email" matTooltipPosition="above" *ngIf="row.updatedUser">{{row.updatedUser.name}}</span>
                  </mat-cell>
                </ng-container>

                <ng-container cdkColumnDef="updatedAt">
                  <mat-header-cell *cdkHeaderCellDef mat-sort-header fxFlex="150px" fxLayoutAlign="center center">
                    Updated at </mat-header-cell>
                  <mat-cell *cdkCellDef="let row" fxFlex="150px" fxLayoutAlign="center center">
                    <span *ngIf="row.updatedAt">{{row.updatedAt | amDateFormat:'YYYY/MM/DD'}}</span>
                  </mat-cell>
                </ng-container>

                <ng-container cdkColumnDef="action">
                  <mat-header-cell *cdkHeaderCellDef fxLayout="row" fxFlex="250px" fxLayoutAlign="center center">
                    Action </mat-header-cell>
                  <mat-cell *cdkCellDef="let row" fxLayout="row" fxFlex="250px" fxLayoutAlign="center center">
                    <button mat-mini-fab class="action-btn" color="primary" matTooltip="Edit" matTooltipPosition="above"
                      [routerLink]="['./',row.id]" *ngIf="pageContentIsViewable">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-mini-fab class="action-btn" color="warn" matTooltip="Delete" matTooltipPosition="above"
                      (click)="delete(row.id, row.linkText)" [disabled]="lockDelete" *ngIf="pageIsEditable">
                      <mat-icon>delete</mat-icon>
                    </button>
                    <mat-slide-toggle color="primary" name="isEnabled" [(ngModel)]="row.isEnabled" [matTooltip]="row.isEnabled?'Online':'Online'"
                      matTooltipPosition="above" (change)="changeIsEnabled($event, row.id)" [disabled]="!pageIsEditable"
                      vvtkhtml>
                    </mat-slide-toggle>
                  </mat-cell>
                </ng-container>

                <mat-header-row *cdkHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *cdkRowDef="let row; columns: displayedColumns;"></mat-row>
              </mat-table>
              <mat-paginator #paginator [length]="database.dataLength" [pageIndex]="0" [pageSize]="10"
                [pageSizeOptions]="[10, 30, 50, 100]">
              </mat-paginator>
              <vvtk-loader *ngIf="database.isLoading"></vvtk-loader>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-card-content>
  </mat-card>
</div>
